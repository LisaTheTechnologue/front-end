<div *ngIf="!trip">{{ error }} </div>
<div *ngIf="trip">
  <div class="hero-image" [style.backgroundImage]="'url(' + trip.imageURL + ')'">
    
  </div>
  <div class="container my-5 lh-lg">
      <div class="h4">{{ trip.title }}</div>
      <!-- <button>Hire me</button> -->
    
    <section class="row">
        <div class="col-md-8">
          <!-- <div class="section-title">Tổng quan</div> -->
          <p class="fw-bold fst-italic fs-6">{{trip.summary}}</p>
        </div>
        <div class="col-md-4 text-center align-items-center">
          <mat-card>
            <mat-card-content>
              <div class="h4">Thông tin chuyến đi</div>
              <p>{{ trip.startDate }} - {{ trip.endDate }}</p>
              <p>Adventure Level: {{trip.tripLevel}}</p>
              <p>Age {{trip.minAge}} - {{trip.maxAge}} years old</p>
              <p>{{trip.price}}/pax</p>
              <p class="fw-bold fst-italic">Only {{ trip.vacantNumber }} spots left!!!!</p>
            </mat-card-content>
          </mat-card>
        </div>
    </section>
    <section>
      <div class="section-title">Lịch trình tour</div>
      <p>Lịch trình tour có thể thay đổi tùy theo điều kiện thời tiết. </p>
      <table class="table mt-1">
        <tbody>
          <tr *ngFor="let day of trip.tripDays">
            <td><b>Day {{ day.dayNo }}</b></td>
            <td>
              <table class="table table-borderless m-2">
                <tbody>
                  <tr *ngFor="let activity of day.activities">
                    <td><b>{{ activity.title }}</b></td>
                    <td>{{ activity.description }}</td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
    <section>
      <div class="section-title">Hình ảnh</div>
      <!-- <app-image-slider [slides]="trip.byteImgs"></app-image-slider> -->
      <app-image-lightbox [slides]="trip.byteImgs"></app-image-lightbox>
    </section>
    
    <section>
      <div class="section-title">Hướng dẫn viên</div>
      <mat-card class="mx-auto p-2" style="width:25%">
        <app-profile-card [userId]="trip.leaderId"></app-profile-card>
      </mat-card>
    </section>
    <section>
      <div class="section-title">Lưu ý</div>
      {{ trip.notes }}
    </section>
    <section>
      <div class="section-title">Chính sách hoàn hủy tour</div>
      <ul>
        <li>Hủy trước ngày chuyến đi bắt đầu ít nhất 1 tháng: <span>{{ trip.cancelOneMonth | cancelPolicy }}</span></li>
        <li>Hủy trước ngày chuyến đi bắt đầu ít nhất 1 tuần: <span>{{ trip.cancelOneWeek | cancelPolicy }}</span></li>
        <li>Hủy trước ngày chuyến đi bắt đầu ít nhất 24 tiếng: <span>{{ trip.cancelOneDay | cancelPolicy }}</span></li>
      </ul>
    </section>

    <section *ngIf="members?.length > 0">
      <div class="col-3 p-3">
        <div class="section-title">Your buddies:</div>
      </div>
      <div class="item-container col p-3">
        <ng-template ngFor let-member [ngForOf]="members">
          <mat-card [routerLink]="['/profile/', member.userId]" style="width:40%; margin: 10px;">
            <app-profile-card [userId]="member.userId"></app-profile-card>
          </mat-card>
        </ng-template>
      </div>
    </section>
    <section *ngIf="members?.length === 0">
      <p>Be the first one to join this trip!</p>
    </section>

    <section *ngIf="feedbacks?.length > 0">
      <div class="col-3 p-3">
        <div class="section-title">Feedbacks:</div>
      </div>
      <div class="item-container col p-3">
        <ng-template ngFor let-feedback [ngForOf]="feedbacks">
          <mat-card style="width:40%; margin: 10px;">
            <app-feedback-card [feedback]="feedback"></app-feedback-card>
          </mat-card>
        </ng-template>
      </div>
    </section>
    <section *ngIf="feedbacks?.length === 0">
      <p>Be the first one to rate this trip!</p>
    </section>

  </div>
</div>