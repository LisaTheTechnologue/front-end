<div class="container my-5">
  <div *ngIf="error">{{ error }} </div>
  <div *ngIf="trip">
    <div class="row">
      <div class="col-6 p-3">
        <p class="h3">{{ trip.title }}</p>
        <div>
          <mat-card [routerLink]="['/profile/', trip.leaderId]" style="width:50%">
            <app-profile-card [userId]="trip.leaderId"></app-profile-card>
          </mat-card>

        </div>
        <p>{{trip.summary}}</p>
        <!-- <p>Trip is opened until {{ trip.startDate }}</p> -->
      </div>
      <div class="col-6 d-flex justify-content-center">
        <img [src]="trip.imageURL" alt="trip-image">
      </div>
    </div>

    <div class="row ">
      <div class="col-3 p-3">
        <div class="border bg-white p-3">
          <p>Duration {{ trip.startDate }} - {{ trip.endDate }}</p>
          <p>Adventure Level: {{trip.tripLevel}}</p>
          <p>Age {{trip.minAge}} - {{trip.maxAge}} years old</p>
          <p>{{trip.price}}/pax</p>
          <p>Number of team member: {{trip.groupSize}}</p>
        </div>
      </div>
      <div class="col p-3">
        {{ trip.notes }}
      </div>
    </div>

    <div class="row">
      <div class="col-3 p-3">
        <div class="h5">Itinerary:</div>
      </div>
      <div class="col p-3">
        <table class="table table-striped mt-1">
          <tbody>
            <tr *ngFor="let item of trip.tripDays">
              <td>Day {{ item.dayNo }}</td>
              <td>{{ item.title }}</td>
              <td>{{ item.description }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row" *ngIf="members?.length > 0">
      <div class="col-3 p-3">
        <div class="h5">Your buddies:</div>
      </div>
      <div class="item-container col p-3">
        <ng-template ngFor let-member [ngForOf]="members">
          <mat-card [routerLink]="['/profile/', member.userId]" style="width:40%; margin: 10px;">
            <app-profile-card [userId]="member.userId"></app-profile-card>
          </mat-card>
        </ng-template>
      </div>
    </div>
    <div class="row" *ngIf="members?.length === 0">
      <p>Be the first one to join this trip!</p>
    </div>

    <div class="row" *ngIf="feedbacks?.length > 0">
      <div class="col-3 p-3">
        <div class="h5">Comments:</div>
      </div>
      <div class="item-container col p-3">
        <ng-template ngFor let-feedback [ngForOf]="feedbacks">
          <mat-card style="width:40%; margin: 10px;">
            <app-feedback-card [feedback]="feedback"></app-feedback-card>
            </mat-card>
        </ng-template>
      </div>
    </div>
    <div class="row" *ngIf="feedbacks?.length === 0">
      <p>Be the first one to rate this trip!</p>
    </div>
  </div>


    <div>
      <button mat-flat-button color="success" *ngIf="!isJoined && !isEnded" class="me-2" (click)="joinTrip()">
        <mat-icon>input</mat-icon> Join Trip
      </button>
      <button mat-flat-button color="warn" *ngIf="isJoined && !isEnded" class="me-2" (click)="revokeJoinTrip()">
        <mat-icon>clear</mat-icon> Revoke Join
      </button>
      <button mat-stroked-button color="success" *ngIf="isJoined && !isEnded" class="me-2" [routerLink]="['/member/chat/',tripId]">
        <mat-icon> chat</mat-icon> Join Team Chat
      </button>
      <button mat-stroked-button color="success" *ngIf="isJoined && isEnded" class="me-2" [routerLink]="['/member/feedback/',tripId]">
        <mat-icon>feedback</mat-icon> Rate Trip
      </button>
    </div>
  </div>

